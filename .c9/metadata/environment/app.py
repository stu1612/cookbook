{"changed":true,"filter":false,"title":"app.py","tooltip":"/app.py","value":"import os, math\nfrom flask import Flask, render_template, url_for, request, flash, \\\n    redirect\nfrom flask_pymongo import PyMongo, pymongo\nfrom bson.objectid import ObjectId\nfrom flask_paginate import Pagination\n\n\napp = Flask(__name__)\napp.config['MONGO_DBNAME'] = 'cook_book'\napp.config['MONGO_URI'] = os.environ.get('MONGO_URI')\napp.secret_key = os.environ.get('SECRET_KEY')\n\nmongo = PyMongo(app)\n\n\n@app.route('/')\n@app.route('/home')\ndef home():\n    return render_template('home.html', title='Home')\n\n\n@app.route('/recipes')\ndef recipes():\n     # Pagination function\n    page_limit = 6\n    current_page = int(request.args.get('current_page', 1))\n    total = mongo.db.recipes.count()\n    pages = range(1, int(math.ceil(total / page_limit)) + 1)\n    recipes = mongo.db.recipes.find().sort('_id', pymongo.DESCENDING).skip(\n                            (current_page - 1)*page_limit).limit(page_limit)\n    return render_template('recipes.html',\n                           recipes=recipes,pages=pages,current_page=current_page,\n                           title='Recipes')\n\n\n@app.route('/add_recipe')\ndef add_recipe():\n    return render_template('add_recipe.html', title='Create Recipe',\n                           recipes=mongo.db.recipes.find())\n\n\n@app.route('/post_recipe', methods=['POST'])\ndef post_recipe():\n    if request.method == 'POST':\n        recipes = mongo.db.recipes\n    recipes.insert({\n        'title': request.form.get('title'),\n        'tag_1': request.form.get('tag_1'),\n        'tag_2': request.form.get('tag_2'),\n        'tag_3': request.form.get('tag_3'),\n        'prep_time': request.form.get('prep_time'),\n        'cook_time': request.form.get('cook_time'),\n        'serving': request.form.get('serving'),\n        'image': request.form.get('image'),\n        'ing_1': request.form.get('ing_1'),\n        'ing_2': request.form.get('ing_2'),\n        'ing_3': request.form.get('ing_3'),\n        'ing_4': request.form.get('ing_4'),\n        'ing_5': request.form.get('ing_5'),\n        'method_1': request.form.get('method_1'),\n        'method_2': request.form.get('method_2'),\n        'method_3': request.form.get('method_3'),\n        'method_4': request.form.get('method_4'),\n        'method_5': request.form.get('method_5'),\n        })\n\n    flash('Great - your recipe has been added to our collection !',\n          'success')\n    return redirect(url_for('recipes'))\n# return render_template('add_recipe.html', title='Create Recipe')\n\n\n# the_recipe route is the route to see the selected card recipe in a full html page including all contents\n\n@app.route('/the_recipe/<recipe_id>')\ndef the_recipe(recipe_id):\n    the_recipe = mongo.db.recipes.find({'_id': ObjectId(recipe_id)})\n    return render_template('the_recipe.html', title='Selected Recipe',\n                       recipes=the_recipe)\n\n\n# update_recipe route is the route to see the returned selected recipe_id to edit contents\n\n@app.route('/edit_recipe/<recipe_id>')\ndef edit_recipe(recipe_id):\n    the_recipe = mongo.db.recipes.find_one({'_id': ObjectId(recipe_id)})\n    return render_template('update_recipe.html', recipe=the_recipe,\n                       title='Update Recipe')\n\n\n@app.route('/update_recipe/<recipe_id>', methods=['GET', 'POST'])\ndef update_recipe(recipe_id):\n    recipes = mongo.db.recipes\n    recipes.update_one({'_id': ObjectId(recipe_id)}, \n    {\"$set\":\n        {'title': request.form.get('title'),\n        'tag_1': request.form.get('tag_1'),\n        'tag_2': request.form.get('tag_2'),\n        'tag_3': request.form.get('tag_3'),\n        'prep_time': request.form.get('prep_time'),\n        'cook_time': request.form.get('cook_time'),\n        'serving': request.form.get('serving'),\n        'image': request.form.get('image'),\n        'ing_1': request.form.get('ing_1'),\n        'ing_2': request.form.get('ing_2'),\n        'ing_3': request.form.get('ing_3'),\n        'ing_4': request.form.get('ing_4'),\n        'ing_5': request.form.get('ing_5'),\n        'method_1': request.form.get('method_1'),\n        'method_2': request.form.get('method_2'),\n        'method_3': request.form.get('method_3'),\n        'method_4': request.form.get('method_4'),\n        'method_5': request.form.get('method_5')\n        }\n    })\n    flash('The recipe has successfully been updated!', 'success')\n    return redirect(url_for('recipes'))\n\n\n@app.route('/delete_recipe/<recipe_id>')\ndef delete_recipe(recipe_id):\n    mongo.db.recipes.remove()\n    flash('The recipe has been deleted', 'primary')\n    return redirect(url_for('recipes'))\n   \n\n\n@app.route('/post_search', methods=['POST'])\ndef post_search():\n    recipes=mongo.db.recipes.find()\n    search = request.form.get('post_search')\n    post_search = mongo.db.recipes.find({\"tag_2\": {\"$regex\":search}})\n    count = post_search.count()\n    return render_template(\"filtered_search.html\", recipes=recipes, post_search=post_search, count=count, title=\"Filtered Search\")    \n    \n    \nif __name__ == '__main__':\n    app.run(host=os.environ.get('IP'), port=int(os.environ.get('PORT'\n            )), debug=True)\n\n\n\t\t\t","undoManager":{"mark":99,"position":100,"stack":[[{"start":{"row":156,"column":42},"end":{"row":156,"column":44},"action":"insert","lines":["''"],"id":1477}],[{"start":{"row":156,"column":43},"end":{"row":156,"column":44},"action":"insert","lines":["$"],"id":1478},{"start":{"row":156,"column":44},"end":{"row":156,"column":45},"action":"insert","lines":["s"]},{"start":{"row":156,"column":45},"end":{"row":156,"column":46},"action":"insert","lines":["e"]},{"start":{"row":156,"column":46},"end":{"row":156,"column":47},"action":"insert","lines":["a"]},{"start":{"row":156,"column":47},"end":{"row":156,"column":48},"action":"insert","lines":["r"]}],[{"start":{"row":156,"column":48},"end":{"row":156,"column":49},"action":"insert","lines":["c"],"id":1479},{"start":{"row":156,"column":49},"end":{"row":156,"column":50},"action":"insert","lines":["h"]}],[{"start":{"row":156,"column":51},"end":{"row":156,"column":52},"action":"insert","lines":[":"],"id":1480}],[{"start":{"row":156,"column":52},"end":{"row":156,"column":53},"action":"insert","lines":[" "],"id":1481},{"start":{"row":156,"column":53},"end":{"row":156,"column":54},"action":"insert","lines":["q"]},{"start":{"row":156,"column":54},"end":{"row":156,"column":55},"action":"insert","lines":["u"]},{"start":{"row":156,"column":55},"end":{"row":156,"column":56},"action":"insert","lines":["e"]},{"start":{"row":156,"column":56},"end":{"row":156,"column":57},"action":"insert","lines":["r"]},{"start":{"row":156,"column":57},"end":{"row":156,"column":58},"action":"insert","lines":["y"]}],[{"start":{"row":157,"column":51},"end":{"row":157,"column":52},"action":"insert","lines":["r"],"id":1482},{"start":{"row":157,"column":52},"end":{"row":157,"column":53},"action":"insert","lines":["e"]},{"start":{"row":157,"column":53},"end":{"row":157,"column":54},"action":"insert","lines":["s"]},{"start":{"row":157,"column":54},"end":{"row":157,"column":55},"action":"insert","lines":["u"]},{"start":{"row":157,"column":55},"end":{"row":157,"column":56},"action":"insert","lines":["l"]},{"start":{"row":157,"column":56},"end":{"row":157,"column":57},"action":"insert","lines":["t"]},{"start":{"row":157,"column":57},"end":{"row":157,"column":58},"action":"insert","lines":["s"]}],[{"start":{"row":157,"column":58},"end":{"row":157,"column":59},"action":"insert","lines":["="],"id":1483},{"start":{"row":157,"column":59},"end":{"row":157,"column":60},"action":"insert","lines":["r"]},{"start":{"row":157,"column":60},"end":{"row":157,"column":61},"action":"insert","lines":["e"]},{"start":{"row":157,"column":61},"end":{"row":157,"column":62},"action":"insert","lines":["s"]},{"start":{"row":157,"column":62},"end":{"row":157,"column":63},"action":"insert","lines":["u"]},{"start":{"row":157,"column":63},"end":{"row":157,"column":64},"action":"insert","lines":["l"]},{"start":{"row":157,"column":64},"end":{"row":157,"column":65},"action":"insert","lines":["t"]},{"start":{"row":157,"column":65},"end":{"row":157,"column":66},"action":"insert","lines":["s"]}],[{"start":{"row":157,"column":66},"end":{"row":157,"column":67},"action":"insert","lines":[","],"id":1484}],[{"start":{"row":157,"column":67},"end":{"row":157,"column":68},"action":"insert","lines":[" "],"id":1485}],[{"start":{"row":155,"column":34},"end":{"row":155,"column":35},"action":"remove","lines":["q"],"id":1486}],[{"start":{"row":155,"column":34},"end":{"row":155,"column":35},"action":"insert","lines":["a"],"id":1487}],[{"start":{"row":155,"column":34},"end":{"row":155,"column":35},"action":"remove","lines":["a"],"id":1488}],[{"start":{"row":155,"column":34},"end":{"row":155,"column":35},"action":"insert","lines":["t"],"id":1489},{"start":{"row":155,"column":35},"end":{"row":155,"column":36},"action":"insert","lines":["a"]},{"start":{"row":155,"column":36},"end":{"row":155,"column":37},"action":"insert","lines":["g"]},{"start":{"row":155,"column":37},"end":{"row":155,"column":38},"action":"insert","lines":["_"]},{"start":{"row":155,"column":38},"end":{"row":155,"column":39},"action":"insert","lines":["\""]}],[{"start":{"row":155,"column":38},"end":{"row":155,"column":39},"action":"remove","lines":["\""],"id":1490}],[{"start":{"row":155,"column":38},"end":{"row":155,"column":39},"action":"insert","lines":["2"],"id":1491}],[{"start":{"row":152,"column":13},"end":{"row":152,"column":25},"action":"remove","lines":["search_filte"],"id":1492},{"start":{"row":152,"column":13},"end":{"row":152,"column":14},"action":"insert","lines":["p"]},{"start":{"row":152,"column":14},"end":{"row":152,"column":15},"action":"insert","lines":["o"]},{"start":{"row":152,"column":15},"end":{"row":152,"column":16},"action":"insert","lines":["t"]}],[{"start":{"row":152,"column":15},"end":{"row":152,"column":16},"action":"remove","lines":["t"],"id":1493}],[{"start":{"row":152,"column":15},"end":{"row":152,"column":16},"action":"remove","lines":["r"],"id":1494}],[{"start":{"row":152,"column":15},"end":{"row":152,"column":16},"action":"insert","lines":["a"],"id":1495},{"start":{"row":152,"column":16},"end":{"row":152,"column":17},"action":"insert","lines":["t"]},{"start":{"row":152,"column":17},"end":{"row":152,"column":18},"action":"insert","lines":["_"]},{"start":{"row":152,"column":18},"end":{"row":152,"column":19},"action":"insert","lines":["s"]},{"start":{"row":152,"column":19},"end":{"row":152,"column":20},"action":"insert","lines":["e"]},{"start":{"row":152,"column":20},"end":{"row":152,"column":21},"action":"insert","lines":["a"]},{"start":{"row":152,"column":21},"end":{"row":152,"column":22},"action":"insert","lines":["r"]},{"start":{"row":152,"column":22},"end":{"row":152,"column":23},"action":"insert","lines":["c"]},{"start":{"row":152,"column":23},"end":{"row":152,"column":24},"action":"insert","lines":["h"]}],[{"start":{"row":153,"column":4},"end":{"row":153,"column":16},"action":"remove","lines":["search_filte"],"id":1496},{"start":{"row":153,"column":4},"end":{"row":153,"column":5},"action":"insert","lines":["p"]},{"start":{"row":153,"column":5},"end":{"row":153,"column":6},"action":"insert","lines":["o"]},{"start":{"row":153,"column":6},"end":{"row":153,"column":7},"action":"insert","lines":["s"]},{"start":{"row":153,"column":7},"end":{"row":153,"column":8},"action":"insert","lines":["t"]}],[{"start":{"row":153,"column":4},"end":{"row":153,"column":8},"action":"remove","lines":["post"],"id":1497},{"start":{"row":153,"column":4},"end":{"row":153,"column":15},"action":"insert","lines":["post_search"]}],[{"start":{"row":155,"column":34},"end":{"row":155,"column":39},"action":"remove","lines":["tag_2"],"id":1498}],[{"start":{"row":155,"column":34},"end":{"row":155,"column":35},"action":"insert","lines":["q"],"id":1499}],[{"start":{"row":153,"column":15},"end":{"row":153,"column":16},"action":"remove","lines":["r"],"id":1500}],[{"start":{"row":152,"column":15},"end":{"row":152,"column":16},"action":"remove","lines":["a"],"id":1501}],[{"start":{"row":152,"column":15},"end":{"row":152,"column":16},"action":"insert","lines":["s"],"id":1502}],[{"start":{"row":152,"column":26},"end":{"row":152,"column":44},"action":"remove","lines":[", methods=['POST']"],"id":1503}],[{"start":{"row":152,"column":13},"end":{"row":152,"column":17},"action":"remove","lines":["post"],"id":1504},{"start":{"row":152,"column":13},"end":{"row":152,"column":14},"action":"insert","lines":["g"]},{"start":{"row":152,"column":14},"end":{"row":152,"column":15},"action":"insert","lines":["e"]},{"start":{"row":152,"column":15},"end":{"row":152,"column":16},"action":"insert","lines":["t"]}],[{"start":{"row":153,"column":4},"end":{"row":153,"column":8},"action":"remove","lines":["post"],"id":1505},{"start":{"row":153,"column":4},"end":{"row":153,"column":5},"action":"insert","lines":["g"]},{"start":{"row":153,"column":5},"end":{"row":153,"column":6},"action":"insert","lines":["e"]},{"start":{"row":153,"column":6},"end":{"row":153,"column":7},"action":"insert","lines":["t"]}],[{"start":{"row":155,"column":24},"end":{"row":155,"column":37},"action":"remove","lines":["form.get('q')"],"id":1506},{"start":{"row":155,"column":24},"end":{"row":155,"column":25},"action":"insert","lines":["a"]},{"start":{"row":155,"column":25},"end":{"row":155,"column":26},"action":"insert","lines":["r"]},{"start":{"row":155,"column":26},"end":{"row":155,"column":27},"action":"insert","lines":["g"]},{"start":{"row":155,"column":27},"end":{"row":155,"column":28},"action":"insert","lines":["s"]},{"start":{"row":155,"column":28},"end":{"row":155,"column":29},"action":"insert","lines":["."]}],[{"start":{"row":155,"column":29},"end":{"row":155,"column":30},"action":"insert","lines":["g"],"id":1507},{"start":{"row":155,"column":30},"end":{"row":155,"column":31},"action":"insert","lines":["e"]},{"start":{"row":155,"column":31},"end":{"row":155,"column":32},"action":"insert","lines":["t"]}],[{"start":{"row":155,"column":32},"end":{"row":155,"column":34},"action":"insert","lines":["()"],"id":1508}],[{"start":{"row":155,"column":33},"end":{"row":155,"column":35},"action":"insert","lines":["''"],"id":1509}],[{"start":{"row":155,"column":34},"end":{"row":155,"column":35},"action":"insert","lines":["q"],"id":1510}],[{"start":{"row":157,"column":67},"end":{"row":157,"column":68},"action":"insert","lines":[" "],"id":1511},{"start":{"row":157,"column":68},"end":{"row":157,"column":69},"action":"insert","lines":["q"]},{"start":{"row":157,"column":69},"end":{"row":157,"column":70},"action":"insert","lines":["u"]},{"start":{"row":157,"column":70},"end":{"row":157,"column":71},"action":"insert","lines":["e"]},{"start":{"row":157,"column":71},"end":{"row":157,"column":72},"action":"insert","lines":["r"]},{"start":{"row":157,"column":72},"end":{"row":157,"column":73},"action":"insert","lines":["y"]}],[{"start":{"row":157,"column":73},"end":{"row":157,"column":74},"action":"insert","lines":["="],"id":1512},{"start":{"row":157,"column":74},"end":{"row":157,"column":75},"action":"insert","lines":["q"]},{"start":{"row":157,"column":75},"end":{"row":157,"column":76},"action":"insert","lines":["u"]},{"start":{"row":157,"column":76},"end":{"row":157,"column":77},"action":"insert","lines":["e"]},{"start":{"row":157,"column":77},"end":{"row":157,"column":78},"action":"insert","lines":["r"]},{"start":{"row":157,"column":78},"end":{"row":157,"column":79},"action":"insert","lines":["y"]}],[{"start":{"row":157,"column":79},"end":{"row":157,"column":80},"action":"insert","lines":[","],"id":1513}],[{"start":{"row":152,"column":23},"end":{"row":152,"column":24},"action":"remove","lines":["/"],"id":1514}],[{"start":{"row":154,"column":0},"end":{"row":154,"column":32},"action":"remove","lines":["    if request.method == 'POST':"],"id":1515},{"start":{"row":153,"column":17},"end":{"row":154,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":156,"column":4},"end":{"row":156,"column":8},"action":"insert","lines":["    "],"id":1516}],[{"start":{"row":152,"column":0},"end":{"row":153,"column":17},"action":"remove","lines":["@app.route('/get_search')","def get_search():"],"id":1517},{"start":{"row":152,"column":0},"end":{"row":153,"column":18},"action":"insert","lines":["@app.route('/post_search' methods=['POST'])","def post_search():"]}],[{"start":{"row":152,"column":25},"end":{"row":152,"column":26},"action":"insert","lines":[","],"id":1518}],[{"start":{"row":154,"column":8},"end":{"row":155,"column":61},"action":"remove","lines":["query = request.args.get('q')","        results = mongo.db.find({'$text':{'$search': query}})"],"id":1519},{"start":{"row":154,"column":8},"end":{"row":159,"column":93},"action":"insert","lines":["if request.method == \"POST\":","​","        query = request.form.get('q') # If the form is submitted grab the user input","​","        results = mongo.db.find({'$text':{'$search': query}}) # And search the db with it","        return render_template('search.html', results=results) # Pass the results to the view"]}],[{"start":{"row":155,"column":0},"end":{"row":155,"column":1},"action":"remove","lines":["​"],"id":1520},{"start":{"row":154,"column":36},"end":{"row":155,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":156,"column":0},"end":{"row":156,"column":1},"action":"remove","lines":["​"],"id":1521},{"start":{"row":155,"column":84},"end":{"row":156,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":157,"column":0},"end":{"row":157,"column":93},"action":"remove","lines":["        return render_template('search.html', results=results) # Pass the results to the view"],"id":1522},{"start":{"row":156,"column":89},"end":{"row":157,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":155,"column":8},"end":{"row":155,"column":12},"action":"insert","lines":["    "],"id":1523}],[{"start":{"row":156,"column":8},"end":{"row":156,"column":12},"action":"insert","lines":["    "],"id":1524}],[{"start":{"row":157,"column":8},"end":{"row":157,"column":12},"action":"insert","lines":["    "],"id":1525}],[{"start":{"row":156,"column":31},"end":{"row":156,"column":32},"action":"insert","lines":["r"],"id":1526},{"start":{"row":156,"column":32},"end":{"row":156,"column":33},"action":"insert","lines":["e"]},{"start":{"row":156,"column":33},"end":{"row":156,"column":34},"action":"insert","lines":["c"]},{"start":{"row":156,"column":34},"end":{"row":156,"column":35},"action":"insert","lines":["i"]},{"start":{"row":156,"column":35},"end":{"row":156,"column":36},"action":"insert","lines":["p"]},{"start":{"row":156,"column":36},"end":{"row":156,"column":37},"action":"insert","lines":["e"]},{"start":{"row":156,"column":37},"end":{"row":156,"column":38},"action":"insert","lines":["s"]}],[{"start":{"row":156,"column":38},"end":{"row":156,"column":39},"action":"insert","lines":["."],"id":1527}],[{"start":{"row":127,"column":0},"end":{"row":149,"column":69},"action":"remove","lines":["                           ","# @app.route('/search_filter', methods=['GET', 'POST'])","# def search_filter():","#     if request.method == \"POST\":","#         for i in request.form:","#             if i == \"tag_2\":","#                 filter_items = []","#                 items = request.form.getlist('diet_labels')  # get as a list []","#                 my_key = request.form  # get as a multdict","#                 for item in items:  # iterate through the list","#                     for key in my_key:  # grab key_name","#                         filter_items.append({key: item})","#                         results = mongo.db.recipe.find({","#                                             '$and': [{'$or': filter_items}]})","#                 total_results = mongo.db.recipe.find({","#                                     '$and': [{'$or': filter_items}]}).count()","#     return render_template('filtered_search.html', results=results, total_results=total_results, title='Filtered Results')","   ","   ","# @app.route('/recipes/<str:tag_2>')","# def search_filter(tag_2):","#     tag = mongo.db.recipes.query.filter_by(tag_2=tag_2).first()","#     return render_template('filtered_search.html', recipes=recipes)"],"id":1528},{"start":{"row":126,"column":3},"end":{"row":127,"column":0},"action":"remove","lines":["",""]},{"start":{"row":126,"column":2},"end":{"row":126,"column":3},"action":"remove","lines":[" "]}],[{"start":{"row":126,"column":1},"end":{"row":126,"column":2},"action":"remove","lines":[" "],"id":1529},{"start":{"row":126,"column":0},"end":{"row":126,"column":1},"action":"remove","lines":[" "]},{"start":{"row":125,"column":3},"end":{"row":126,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":131,"column":42},"end":{"row":131,"column":88},"action":"remove","lines":["# If the form is submitted grab the user input"],"id":1530}],[{"start":{"row":132,"column":74},"end":{"row":132,"column":101},"action":"remove","lines":["# And search the db with it"],"id":1531}],[{"start":{"row":134,"column":0},"end":{"row":135,"column":0},"action":"insert","lines":["",""],"id":1532},{"start":{"row":135,"column":0},"end":{"row":136,"column":0},"action":"insert","lines":["",""]}],[{"start":{"row":136,"column":0},"end":{"row":142,"column":121},"action":"insert","lines":["@app.route('/search_recipes_by_cuisine', methods=['POST'])","def search_recipes_by_cuisine():","    recipes=mongo.db.recipes.find()","    search = request.form.get('search_recipes_by_cuisine').lower()","    cuisine_search = mongo.db.recipes.find({\"recipe_cuisine\": {\"$regex\":search}}).sort(\"views\", -1)","    count = cuisine_search.count()","    return render_template(\"search_recipes_by_cuisine.html\", recipes=recipes, cuisine_search=cuisine_search, count=count)"],"id":1533}],[{"start":{"row":136,"column":0},"end":{"row":137,"column":32},"action":"remove","lines":["@app.route('/search_recipes_by_cuisine', methods=['POST'])","def search_recipes_by_cuisine():"],"id":1534},{"start":{"row":136,"column":0},"end":{"row":137,"column":18},"action":"insert","lines":["@app.route('/post_search', methods=['POST'])","def post_search():"]}],[{"start":{"row":130,"column":0},"end":{"row":130,"column":36},"action":"remove","lines":["        if request.method == \"POST\":"],"id":1535},{"start":{"row":129,"column":18},"end":{"row":130,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":128,"column":0},"end":{"row":128,"column":2},"action":"insert","lines":["# "],"id":1536},{"start":{"row":129,"column":0},"end":{"row":129,"column":2},"action":"insert","lines":["# "]},{"start":{"row":130,"column":0},"end":{"row":130,"column":2},"action":"insert","lines":["# "]},{"start":{"row":131,"column":0},"end":{"row":131,"column":2},"action":"insert","lines":["# "]},{"start":{"row":132,"column":0},"end":{"row":132,"column":2},"action":"insert","lines":["# "]}],[{"start":{"row":138,"column":58},"end":{"row":138,"column":66},"action":"remove","lines":[".lower()"],"id":1537}],[{"start":{"row":138,"column":31},"end":{"row":138,"column":56},"action":"remove","lines":["search_recipes_by_cuisine"],"id":1538},{"start":{"row":138,"column":31},"end":{"row":138,"column":32},"action":"insert","lines":["p"]},{"start":{"row":138,"column":32},"end":{"row":138,"column":33},"action":"insert","lines":["o"]},{"start":{"row":138,"column":33},"end":{"row":138,"column":34},"action":"insert","lines":["s"]},{"start":{"row":138,"column":34},"end":{"row":138,"column":35},"action":"insert","lines":["t"]},{"start":{"row":138,"column":35},"end":{"row":138,"column":36},"action":"insert","lines":["_"]},{"start":{"row":138,"column":36},"end":{"row":138,"column":37},"action":"insert","lines":["s"]},{"start":{"row":138,"column":37},"end":{"row":138,"column":38},"action":"insert","lines":["e"]}],[{"start":{"row":138,"column":38},"end":{"row":138,"column":39},"action":"insert","lines":["a"],"id":1539},{"start":{"row":138,"column":39},"end":{"row":138,"column":40},"action":"insert","lines":["r"]},{"start":{"row":138,"column":40},"end":{"row":138,"column":41},"action":"insert","lines":["c"]},{"start":{"row":138,"column":41},"end":{"row":138,"column":42},"action":"insert","lines":["h"]}],[{"start":{"row":139,"column":4},"end":{"row":139,"column":18},"action":"remove","lines":["cuisine_search"],"id":1540},{"start":{"row":139,"column":4},"end":{"row":139,"column":5},"action":"insert","lines":["t"]},{"start":{"row":139,"column":5},"end":{"row":139,"column":6},"action":"insert","lines":["a"]},{"start":{"row":139,"column":6},"end":{"row":139,"column":7},"action":"insert","lines":["g"]},{"start":{"row":139,"column":7},"end":{"row":139,"column":8},"action":"insert","lines":["_"]},{"start":{"row":139,"column":8},"end":{"row":139,"column":9},"action":"insert","lines":["2"]}],[{"start":{"row":139,"column":36},"end":{"row":139,"column":50},"action":"remove","lines":["recipe_cuisine"],"id":1541},{"start":{"row":139,"column":36},"end":{"row":139,"column":37},"action":"insert","lines":["t"]},{"start":{"row":139,"column":37},"end":{"row":139,"column":38},"action":"insert","lines":["a"]},{"start":{"row":139,"column":38},"end":{"row":139,"column":39},"action":"insert","lines":["g"]},{"start":{"row":139,"column":39},"end":{"row":139,"column":40},"action":"insert","lines":["_"]},{"start":{"row":139,"column":40},"end":{"row":139,"column":41},"action":"insert","lines":["2"]}],[{"start":{"row":141,"column":78},"end":{"row":141,"column":79},"action":"insert","lines":["t"],"id":1542},{"start":{"row":141,"column":79},"end":{"row":141,"column":80},"action":"insert","lines":["a"]},{"start":{"row":141,"column":80},"end":{"row":141,"column":81},"action":"insert","lines":["g"]},{"start":{"row":141,"column":81},"end":{"row":141,"column":82},"action":"insert","lines":["_"]},{"start":{"row":141,"column":82},"end":{"row":141,"column":83},"action":"insert","lines":["\""]},{"start":{"row":141,"column":83},"end":{"row":141,"column":84},"action":"insert","lines":["="]}],[{"start":{"row":141,"column":84},"end":{"row":141,"column":85},"action":"insert","lines":["t"],"id":1543},{"start":{"row":141,"column":85},"end":{"row":141,"column":86},"action":"insert","lines":["a"]},{"start":{"row":141,"column":86},"end":{"row":141,"column":87},"action":"insert","lines":["g"]},{"start":{"row":141,"column":87},"end":{"row":141,"column":88},"action":"insert","lines":["_"]},{"start":{"row":141,"column":88},"end":{"row":141,"column":89},"action":"insert","lines":["2"]}],[{"start":{"row":141,"column":88},"end":{"row":141,"column":89},"action":"remove","lines":["2"],"id":1544},{"start":{"row":141,"column":87},"end":{"row":141,"column":88},"action":"remove","lines":["_"]},{"start":{"row":141,"column":86},"end":{"row":141,"column":87},"action":"remove","lines":["g"]},{"start":{"row":141,"column":85},"end":{"row":141,"column":86},"action":"remove","lines":["a"]},{"start":{"row":141,"column":84},"end":{"row":141,"column":85},"action":"remove","lines":["t"]},{"start":{"row":141,"column":83},"end":{"row":141,"column":84},"action":"remove","lines":["="]},{"start":{"row":141,"column":82},"end":{"row":141,"column":83},"action":"remove","lines":["\""]}],[{"start":{"row":141,"column":82},"end":{"row":141,"column":83},"action":"insert","lines":["2"],"id":1545},{"start":{"row":141,"column":83},"end":{"row":141,"column":84},"action":"insert","lines":["="]},{"start":{"row":141,"column":84},"end":{"row":141,"column":85},"action":"insert","lines":["t"]},{"start":{"row":141,"column":85},"end":{"row":141,"column":86},"action":"insert","lines":["a"]}],[{"start":{"row":141,"column":86},"end":{"row":141,"column":87},"action":"insert","lines":["g"],"id":1546},{"start":{"row":141,"column":87},"end":{"row":141,"column":88},"action":"insert","lines":["_"]},{"start":{"row":141,"column":88},"end":{"row":141,"column":89},"action":"insert","lines":["2"]}],[{"start":{"row":141,"column":89},"end":{"row":141,"column":90},"action":"insert","lines":[","],"id":1547}],[{"start":{"row":141,"column":90},"end":{"row":141,"column":91},"action":"insert","lines":[" "],"id":1548}],[{"start":{"row":140,"column":12},"end":{"row":140,"column":26},"action":"remove","lines":["cuisine_search"],"id":1549},{"start":{"row":140,"column":12},"end":{"row":140,"column":13},"action":"insert","lines":["t"]},{"start":{"row":140,"column":13},"end":{"row":140,"column":14},"action":"insert","lines":["a"]},{"start":{"row":140,"column":14},"end":{"row":140,"column":15},"action":"insert","lines":["g"]},{"start":{"row":140,"column":15},"end":{"row":140,"column":16},"action":"insert","lines":["_"]},{"start":{"row":140,"column":16},"end":{"row":140,"column":17},"action":"insert","lines":["2"]}],[{"start":{"row":141,"column":91},"end":{"row":141,"column":121},"action":"remove","lines":["cuisine_search=cuisine_search,"],"id":1550},{"start":{"row":141,"column":90},"end":{"row":141,"column":91},"action":"remove","lines":[" "]}],[{"start":{"row":138,"column":44},"end":{"row":138,"column":52},"action":"insert","lines":[".lower()"],"id":1551}],[{"start":{"row":139,"column":4},"end":{"row":139,"column":9},"action":"remove","lines":["tag_2"],"id":1552},{"start":{"row":139,"column":4},"end":{"row":139,"column":5},"action":"insert","lines":["p"]},{"start":{"row":139,"column":5},"end":{"row":139,"column":6},"action":"insert","lines":["o"]},{"start":{"row":139,"column":6},"end":{"row":139,"column":7},"action":"insert","lines":["s"]},{"start":{"row":139,"column":7},"end":{"row":139,"column":8},"action":"insert","lines":["t"]},{"start":{"row":139,"column":8},"end":{"row":139,"column":9},"action":"insert","lines":["_"]},{"start":{"row":139,"column":9},"end":{"row":139,"column":10},"action":"insert","lines":["s"]},{"start":{"row":139,"column":10},"end":{"row":139,"column":11},"action":"insert","lines":["e"]},{"start":{"row":139,"column":11},"end":{"row":139,"column":12},"action":"insert","lines":["a"]},{"start":{"row":139,"column":12},"end":{"row":139,"column":13},"action":"insert","lines":["r"]}],[{"start":{"row":139,"column":13},"end":{"row":139,"column":14},"action":"insert","lines":["c"],"id":1553},{"start":{"row":139,"column":14},"end":{"row":139,"column":15},"action":"insert","lines":["h"]}],[{"start":{"row":139,"column":42},"end":{"row":139,"column":47},"action":"remove","lines":["tag_2"],"id":1554},{"start":{"row":139,"column":42},"end":{"row":139,"column":43},"action":"insert","lines":["p"]},{"start":{"row":139,"column":43},"end":{"row":139,"column":44},"action":"insert","lines":["o"]},{"start":{"row":139,"column":44},"end":{"row":139,"column":45},"action":"insert","lines":["s"]},{"start":{"row":139,"column":45},"end":{"row":139,"column":46},"action":"insert","lines":["t"]},{"start":{"row":139,"column":46},"end":{"row":139,"column":47},"action":"insert","lines":["_"]},{"start":{"row":139,"column":47},"end":{"row":139,"column":48},"action":"insert","lines":["s"]},{"start":{"row":139,"column":48},"end":{"row":139,"column":49},"action":"insert","lines":["e"]},{"start":{"row":139,"column":49},"end":{"row":139,"column":50},"action":"insert","lines":["a"]}],[{"start":{"row":139,"column":50},"end":{"row":139,"column":51},"action":"insert","lines":["r"],"id":1555},{"start":{"row":139,"column":51},"end":{"row":139,"column":52},"action":"insert","lines":["c"]},{"start":{"row":139,"column":52},"end":{"row":139,"column":53},"action":"insert","lines":["h"]}],[{"start":{"row":140,"column":12},"end":{"row":140,"column":17},"action":"remove","lines":["tag_2"],"id":1556},{"start":{"row":140,"column":12},"end":{"row":140,"column":13},"action":"insert","lines":["p"]},{"start":{"row":140,"column":13},"end":{"row":140,"column":14},"action":"insert","lines":["o"]},{"start":{"row":140,"column":14},"end":{"row":140,"column":15},"action":"insert","lines":["s"]},{"start":{"row":140,"column":15},"end":{"row":140,"column":16},"action":"insert","lines":["t"]},{"start":{"row":140,"column":16},"end":{"row":140,"column":17},"action":"insert","lines":["_"]},{"start":{"row":140,"column":17},"end":{"row":140,"column":18},"action":"insert","lines":["s"]},{"start":{"row":140,"column":18},"end":{"row":140,"column":19},"action":"insert","lines":["e"]},{"start":{"row":140,"column":19},"end":{"row":140,"column":20},"action":"insert","lines":["a"]},{"start":{"row":140,"column":20},"end":{"row":140,"column":21},"action":"insert","lines":["r"]},{"start":{"row":140,"column":21},"end":{"row":140,"column":22},"action":"insert","lines":["c"]}],[{"start":{"row":140,"column":22},"end":{"row":140,"column":23},"action":"insert","lines":["h"],"id":1557}],[{"start":{"row":141,"column":78},"end":{"row":141,"column":89},"action":"remove","lines":["tag_2=tag_2"],"id":1558},{"start":{"row":141,"column":78},"end":{"row":141,"column":79},"action":"insert","lines":["p"]},{"start":{"row":141,"column":79},"end":{"row":141,"column":80},"action":"insert","lines":["o"]},{"start":{"row":141,"column":80},"end":{"row":141,"column":81},"action":"insert","lines":["s"]},{"start":{"row":141,"column":81},"end":{"row":141,"column":82},"action":"insert","lines":["t"]},{"start":{"row":141,"column":82},"end":{"row":141,"column":83},"action":"insert","lines":["_"]}],[{"start":{"row":141,"column":83},"end":{"row":141,"column":84},"action":"insert","lines":["s"],"id":1559},{"start":{"row":141,"column":84},"end":{"row":141,"column":85},"action":"insert","lines":["e"]},{"start":{"row":141,"column":85},"end":{"row":141,"column":86},"action":"insert","lines":["a"]},{"start":{"row":141,"column":86},"end":{"row":141,"column":87},"action":"insert","lines":["r"]},{"start":{"row":141,"column":87},"end":{"row":141,"column":88},"action":"insert","lines":["c"]},{"start":{"row":141,"column":88},"end":{"row":141,"column":89},"action":"insert","lines":["h"]}],[{"start":{"row":141,"column":89},"end":{"row":141,"column":90},"action":"insert","lines":["="],"id":1560},{"start":{"row":141,"column":90},"end":{"row":141,"column":91},"action":"insert","lines":["p"]},{"start":{"row":141,"column":91},"end":{"row":141,"column":92},"action":"insert","lines":["o"]},{"start":{"row":141,"column":92},"end":{"row":141,"column":93},"action":"insert","lines":["s"]},{"start":{"row":141,"column":93},"end":{"row":141,"column":94},"action":"insert","lines":["t"]}],[{"start":{"row":141,"column":90},"end":{"row":141,"column":94},"action":"remove","lines":["post"],"id":1561},{"start":{"row":141,"column":90},"end":{"row":141,"column":101},"action":"insert","lines":["post_search"]}],[{"start":{"row":141,"column":28},"end":{"row":141,"column":53},"action":"remove","lines":["search_recipes_by_cuisine"],"id":1562},{"start":{"row":141,"column":28},"end":{"row":141,"column":29},"action":"insert","lines":["f"]},{"start":{"row":141,"column":29},"end":{"row":141,"column":30},"action":"insert","lines":["i"]},{"start":{"row":141,"column":30},"end":{"row":141,"column":31},"action":"insert","lines":["l"]},{"start":{"row":141,"column":31},"end":{"row":141,"column":32},"action":"insert","lines":["t"]},{"start":{"row":141,"column":32},"end":{"row":141,"column":33},"action":"insert","lines":["e"]},{"start":{"row":141,"column":33},"end":{"row":141,"column":34},"action":"insert","lines":["r"]},{"start":{"row":141,"column":34},"end":{"row":141,"column":35},"action":"insert","lines":["e"]},{"start":{"row":141,"column":35},"end":{"row":141,"column":36},"action":"insert","lines":["d"]}],[{"start":{"row":141,"column":28},"end":{"row":141,"column":36},"action":"remove","lines":["filtered"],"id":1563},{"start":{"row":141,"column":28},"end":{"row":141,"column":43},"action":"insert","lines":["filtered_search"]}],[{"start":{"row":138,"column":44},"end":{"row":138,"column":52},"action":"remove","lines":[".lower()"],"id":1564}],[{"start":{"row":141,"column":104},"end":{"row":141,"column":105},"action":"insert","lines":[","],"id":1565}],[{"start":{"row":141,"column":105},"end":{"row":141,"column":106},"action":"insert","lines":[" "],"id":1566},{"start":{"row":141,"column":106},"end":{"row":141,"column":107},"action":"insert","lines":["t"]},{"start":{"row":141,"column":107},"end":{"row":141,"column":108},"action":"insert","lines":["i"]},{"start":{"row":141,"column":108},"end":{"row":141,"column":109},"action":"insert","lines":["t"]},{"start":{"row":141,"column":109},"end":{"row":141,"column":110},"action":"insert","lines":["e"]}],[{"start":{"row":141,"column":110},"end":{"row":141,"column":111},"action":"insert","lines":["="],"id":1567}],[{"start":{"row":141,"column":110},"end":{"row":141,"column":111},"action":"remove","lines":["="],"id":1568},{"start":{"row":141,"column":109},"end":{"row":141,"column":110},"action":"remove","lines":["e"]},{"start":{"row":141,"column":108},"end":{"row":141,"column":109},"action":"remove","lines":["t"]}],[{"start":{"row":141,"column":108},"end":{"row":141,"column":109},"action":"insert","lines":["t"],"id":1569},{"start":{"row":141,"column":109},"end":{"row":141,"column":110},"action":"insert","lines":["l"]},{"start":{"row":141,"column":110},"end":{"row":141,"column":111},"action":"insert","lines":["e"]},{"start":{"row":141,"column":111},"end":{"row":141,"column":112},"action":"insert","lines":["="]}],[{"start":{"row":141,"column":112},"end":{"row":141,"column":114},"action":"insert","lines":["\"\""],"id":1570}],[{"start":{"row":141,"column":113},"end":{"row":141,"column":114},"action":"insert","lines":["F"],"id":1571},{"start":{"row":141,"column":114},"end":{"row":141,"column":115},"action":"insert","lines":["i"]},{"start":{"row":141,"column":115},"end":{"row":141,"column":116},"action":"insert","lines":["l"]},{"start":{"row":141,"column":116},"end":{"row":141,"column":117},"action":"insert","lines":["t"]},{"start":{"row":141,"column":117},"end":{"row":141,"column":118},"action":"insert","lines":["e"]},{"start":{"row":141,"column":118},"end":{"row":141,"column":119},"action":"insert","lines":["r"]},{"start":{"row":141,"column":119},"end":{"row":141,"column":120},"action":"insert","lines":["e"]},{"start":{"row":141,"column":120},"end":{"row":141,"column":121},"action":"insert","lines":["d"]}],[{"start":{"row":141,"column":121},"end":{"row":141,"column":122},"action":"insert","lines":[" "],"id":1572},{"start":{"row":141,"column":122},"end":{"row":141,"column":123},"action":"insert","lines":["S"]},{"start":{"row":141,"column":123},"end":{"row":141,"column":124},"action":"insert","lines":["e"]}],[{"start":{"row":141,"column":124},"end":{"row":141,"column":125},"action":"insert","lines":["a"],"id":1573},{"start":{"row":141,"column":125},"end":{"row":141,"column":126},"action":"insert","lines":["r"]},{"start":{"row":141,"column":126},"end":{"row":141,"column":127},"action":"insert","lines":["c"]},{"start":{"row":141,"column":127},"end":{"row":141,"column":128},"action":"insert","lines":["h"]}],[{"start":{"row":139,"column":75},"end":{"row":139,"column":93},"action":"remove","lines":[".sort(\"views\", -1)"],"id":1574}],[{"start":{"row":139,"column":42},"end":{"row":139,"column":53},"action":"remove","lines":["post_search"],"id":1575},{"start":{"row":139,"column":42},"end":{"row":139,"column":43},"action":"insert","lines":["t"]},{"start":{"row":139,"column":43},"end":{"row":139,"column":44},"action":"insert","lines":["a"]},{"start":{"row":139,"column":44},"end":{"row":139,"column":45},"action":"insert","lines":["g"]}],[{"start":{"row":139,"column":45},"end":{"row":139,"column":46},"action":"insert","lines":["_"],"id":1576},{"start":{"row":139,"column":46},"end":{"row":139,"column":47},"action":"insert","lines":["2"]}],[{"start":{"row":126,"column":0},"end":{"row":132,"column":116},"action":"remove","lines":["","","# @app.route('/post_search', methods=['POST'])","# def post_search():","#             query = request.form.get('q') ","#             results = mongo.db.recipes.find({'$text':{'$search': query}}) ","#             return render_template('filtered_search.html', results=results, query=query, title='Selected Recipe') "],"id":1577},{"start":{"row":125,"column":3},"end":{"row":126,"column":2},"action":"remove","lines":["","  "]}]]},"ace":{"folds":[],"scrolltop":1601.1875,"scrollleft":0,"selection":{"start":{"row":125,"column":3},"end":{"row":125,"column":3},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":116,"state":"start","mode":"ace/mode/python"}},"timestamp":1576498293898}